<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>transform3d</title>
    <link rel="stylesheet" type="text/css" href="../scss/t3.css">
    <link rel="stylesheet" type="text/css" href="../scss/circle.css">
    <link rel="stylesheet" type="text/css" href="../scss/flower.css">
    <link rel="stylesheet" type="text/css" href="../scss/loading.css">
</head>

<body>
    <div class="wrapper">
        <!-- preserve-3d -->
        <div class="item trans3d"></div>
        <!-- preserve-3d end -->
        <!-- transform-origin -->
        <div class="item show-hide-item">
            <img class="img1 img1-hover" src="../images/1.jpg" />
            <img class="img2 img2-hover" src="../images/2.jpg" />
        </div>
        <!-- transform-origin end -->
        <!-- icon hover -->
        <div class="item circle-item"></div>
        <!-- icon hover end -->
        <!-- 万花丛中 -->
        <div class="item flower-item">
            <div class="flower">
                <div class="red-circle"></div>
            </div>
        </div>
        <!-- 万花丛中 end -->
        <!-- loading -->
        <div class="item loading-special"></div>
        <!-- loading end -->
        <!-- changeTest -->
        <!-- <div>
        <input type="text" name="input1" id="test1" />
        <input type="text" name="input2" id="test2" />
        <div id="inp-cont"></div>
    </div> -->
        <!-- changeTest end -->
    </div>
    <script src="http://www.jq22.com/jquery/2.1.1/jquery.min.js"></script>
    <script>
    window.jQuery || document.write('<script src="js/jquery-2.1.1.min.js"><\/script>')
    </script>
    <!-- <script src="js/jquery.hover3d.js"></script> -->
    <script>
    $(document).ready(function() {
        function appendDom(dom) {
            var tmpDiv = [];
            if (dom == ".circle-item") {
                for (var i = 0; i < 18; i++) {
                    tmpDiv.push('<div class="circle special-' + (i + 1) + '"><a class="special-icon special-earth">地球</a></div>');
                }
            } else if(dom == ".loading-special"){
                for (i = 0; i < 4; i++) {
                    tmpDiv.push('<div class="loading"></div>');
                }
            } else if(dom == ".trans3d") {
                for(var i = 0; i < 8; i++) {
                    tmpDiv.push('<div class="pc3d"> <img src="../images/'+(i+1)+'.jpg"></div>');
                }
            }
            $(dom).append(tmpDiv.join(" "));
        }

        appendDom(".circle-item");
        appendDom(".loading-special");
        appendDom(".trans3d");

        //changeTest
        // var input1 = $("#test1"),
        //     input2 = $("#test2");
        // var inpArr = [input1, input2];
        // for (var i = 0; i < inpArr.length; i++) {
        //     if (inpArr[i].on) {
        //         inpArr[i].on("change", function() {
        //             console.log(this.value);
        //             $("#inp-cont").html(this.value);
        //         })
        //     }
        // }

        function rotateP(index) {
            var imgarr = $(".trans3d .pc3d");
            if (index) {
                console.log(imgarr.eq(index).css("transform"));
                if (index < imgarr.length / 2) {
                    for (var i = 0; i < imgarr.length; i++) {
                        imgarr.eq(i).css("transform", "rotateY(" + (i - index) * 45 + "deg) translateZ(" + 300 + "px)");
                    }
                } else {
                    for (var i = 0; i < imgarr.length; i++) {
                        imgarr.eq(i).css("transform", "rotateY(" + (i + imgarr.length - index) * 45 + "deg) translateZ(" + 300 + "px)");
                    }
                }
            } else {
                for (var i = 0; i < imgarr.length; i++) {
                    imgarr.eq(i).css({
                        "transform": "rotateY(" + i * 45 + "deg) translateZ(" + 300 + "px)"
                    });
                }
            }
        };
        rotateP();
        var inter = 0;
        var setInter = setInterval(function() {
            inter += 1;
            $("trans3d").css({
                "perspective-origin": inter + "% 100%"
            });
        }, 10)
        $(".pc3d").on("click", function() {
            rotateP($(this).index());
        });
    });
    </script>
</body>

</html>
